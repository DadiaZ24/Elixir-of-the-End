[gd_scene load_steps=15 format=3 uid="uid://cpnt6wx4xrtx5"]

[ext_resource type="PackedScene" uid="uid://ch2hcei3n4etc" path="res://Scenes/terrain.tscn" id="1_bo1nx"]
[ext_resource type="Script" uid="uid://byt6lqdnk57ih" path="res://Scripts/main.gd" id="1_jjvhh"]
[ext_resource type="PackedScene" uid="uid://dsm8dyfxdlsiv" path="res://Scenes/Player.tscn" id="2_8gbba"]
[ext_resource type="Environment" uid="uid://d3lwdwg4xbrfm" path="res://Resources/DefaultEnv.tres" id="2_21xkr"]
[ext_resource type="PackedScene" uid="uid://dq2isirkrgjwi" path="res://Scenes/water.tscn" id="2_jjvhh"]
[ext_resource type="AudioStream" uid="uid://cbvbxjy5u6uf3" path="res://Sounds/ambient.wav" id="5_kry3j"]
[ext_resource type="PackedScene" uid="uid://cp1vhpbfacj5y" path="res://Scenes/assets/potiontent.tscn" id="6_21xkr"]
[ext_resource type="PackedScene" uid="uid://hskqmymgkbfg" path="res://Scenes/assets/normal_tent.tscn" id="7_344ge"]
[ext_resource type="PackedScene" uid="uid://cvkb3tfwpno0i" path="res://Scenes/assets/master_tent.tscn" id="8_ynf5e"]
[ext_resource type="PackedScene" uid="uid://cdfy2bykqjbnr" path="res://Scenes/Inventory/inventory_ui.tscn" id="9_ynf5e"]
[ext_resource type="PackedScene" uid="uid://dk2k60h75kixb" path="res://Scenes/quick_sand.tscn" id="10_hptm8"]
[ext_resource type="Script" uid="uid://ct7s46ryfveag" path="res://Scripts/ui.gd" id="11_fdnlq"]
[ext_resource type="AudioStream" uid="uid://xkbv5yotgou" path="res://Sounds/tutorial_complete.wav" id="12_jkdf5"]
[ext_resource type="Script" uid="uid://8w3ps1e6u2ty" path="res://Scenes/time_bar.gd" id="13_wsu2k"]

[node name="Main" type="Node3D"]
script = ExtResource("1_jjvhh")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource("2_21xkr")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="WorldEnvironment"]
transform = Transform3D(1, 0, 0, 0, 0.863167, 0.504919, 0, -0.504919, 0.863167, 0, 64.2763, 190.867)
sky_mode = 1

[node name="Terrain" parent="." instance=ExtResource("1_bo1nx")]

[node name="Water" parent="Terrain" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 41.0967, -46.8539, -24.6197)

[node name="QuickSand" parent="Terrain" instance=ExtResource("10_hptm8")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -92.7523, -47.1528, -88.8389)

[node name="Ambient Sound" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("5_kry3j")
volume_db = 30.0
autoplay = true

[node name="potion_tent" parent="." instance=ExtResource("6_21xkr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -95.4698, 4.07892, 66.8184)

[node name="NormalTent" parent="." instance=ExtResource("7_344ge")]
transform = Transform3D(0.343047, 0, 0.692904, 0, 0.741, 0, -0.722716, 0, 0.328896, -83.465, 3.44094, 83.6963)

[node name="MasterTent" parent="." instance=ExtResource("8_ynf5e")]
transform = Transform3D(0.815219, 0, -0.579153, 0, 1, 0, 0.579153, 0, 0.815219, -86.1721, 3.88849, 48.9946)

[node name="NormalTent2" parent="." instance=ExtResource("7_344ge")]
transform = Transform3D(0.347885, 0, 0.937537, 0, 1, 0, -0.937537, 0, 0.347885, -75.5449, 3.41563, 84.508)

[node name="InventoryUI" parent="." instance=ExtResource("9_ynf5e")]

[node name="UI" type="CanvasLayer" parent="."]
script = ExtResource("11_fdnlq")

[node name="TutorialPanel" type="Panel" parent="UI"]
offset_right = 282.0
offset_bottom = 51.0
metadata/_edit_use_anchors_ = true

[node name="Label" type="RichTextLabel" parent="UI/TutorialPanel"]
layout_mode = 0
offset_left = 8.0
offset_top = 6.0
offset_right = 283.0
offset_bottom = 44.0
bbcode_enabled = true
scroll_active = false

[node name="TutorialFinished" type="AudioStreamPlayer3D" parent="UI/TutorialPanel"]
stream = ExtResource("12_jkdf5")

[node name="QuestPanel" type="Panel" parent="UI"]
visible = false
offset_right = 314.0
offset_bottom = 118.0

[node name="VBoxContainer" type="VBoxContainer" parent="UI/QuestPanel"]
layout_mode = 0
offset_left = 8.0
offset_top = 6.0
offset_right = 295.0
offset_bottom = 109.0

[node name="Stone" type="CheckBox" parent="UI/QuestPanel/VBoxContainer"]
layout_mode = 2
text = "Find the Philosopher Stone"

[node name="Potion" type="CheckBox" parent="UI/QuestPanel/VBoxContainer"]
layout_mode = 2
text = "Find the Potion of Everlasting Life"

[node name="QuestFinished" type="AudioStreamPlayer3D" parent="UI/QuestPanel"]
stream = ExtResource("12_jkdf5")

[node name="TimeBar" type="ProgressBar" parent="UI"]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -150.0
offset_top = 20.0
offset_right = 150.0
offset_bottom = 47.0
grow_horizontal = 2
max_value = 900.0
step = 1.0
show_percentage = false
script = ExtResource("13_wsu2k")

[node name="TimeLabel" type="Label" parent="UI/TimeBar"]
layout_mode = 0
offset_right = 293.0
offset_bottom = 23.0
horizontal_alignment = 1
vertical_alignment = 1

[node name="QuestFinished" type="AudioStreamPlayer3D" parent="UI"]
stream = ExtResource("12_jkdf5")

[node name="Player" parent="." instance=ExtResource("2_8gbba")]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, -59.8206, 7.21525, -45.2964)

[connection signal="body_entered" from="Terrain/QuickSand" to="Player" method="_on_quick_sand_body_entered"]
[connection signal="body_exited" from="Terrain/QuickSand" to="Player" method="_on_quick_sand_body_exited"]
[connection signal="time_out" from="UI/TimeBar" to="." method="_on_time_bar_time_out"]
